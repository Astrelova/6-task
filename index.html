<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Калькулятор печати на кружках</title>
<style>
    body {
        font-family: Arial, sans-serif;
        max-width: 600px;
        margin: 40px auto;
        line-height: 1.6;
    }
    .block { margin-bottom: 20px; }
    label { display:block; margin: 5px 0; }
    select, input[type="number"] { width: 220px; padding: 5px; }
</style>
</head>
<body>

<h2>Калькулятор печати на кружках</h2>

<form id="calcForm">

    <!-- количество -->
    <div class="block">
        <label>
            Количество:
            <input type="number" id="qty" min="1" value="1" required>
        </label>
    </div>

    <!-- тип товара -->
    <div class="block">
        <div><strong>Тип кружки:</strong></div>

        <label><input type="radio" name="type" value="1" checked> Белая кружка (300 ₽)</label>
        <label><input type="radio" name="type" value="2"> Кружка-хамелеон (500 ₽)</label>
        <label><input type="radio" name="type" value="3"> Кружка с ложкой (450 ₽)</label>
    </div>

    <!-- опции для типа 2 -->
    <div class="block" id="optionsBlock" style="display:none;">
        <label>
            Вид печати:
            <select id="options">
                <option value="150">Малый рисунок (+150)</option>
                <option value="300">Средний рисунок (+300)</option>
                <option value="500">Полная обтяжка (+500)</option>
            </select>
        </label>
    </div>

    <!-- свойство для типа 3 -->
    <div class="block" id="propertyBlock" style="display:none;">
        <label>
            <input type="checkbox" id="property" value="200">
            Подарочная коробка (+200)
        </label>
    </div>

</form>

<h3>Стоимость: <span id="result">0</span> ₽</h3>

<script>
// === РАБОТА С DOM (Document Object Model) ===

// базовые цены
const basePrice = {
    1: 300, // белая кружка
    2: 500, // хамелеон
    3: 450  // с ложкой
};

// ПОЛУЧЕНИЕ ЭЛЕМЕНТОВ ИЗ DOM
const qtyInput = document.getElementById("qty");
const optionsBlock = document.getElementById("optionsBlock");
const propertyBlock = document.getElementById("propertyBlock");
const options = document.getElementById("options");
const property = document.getElementById("property");
const result = document.getElementById("result");
const typeRadios = document.querySelectorAll('input[name="type"]');

// Функция для работы с DOM элементами
function calculate() {
    // Защита от отрицательных чисел через DOM свойство value
    if (qtyInput.value < 1) {
        qtyInput.value = 1; // Изменение значения в DOM
    }
    
    // Получение значений из DOM элементов
    let qty = Number(qtyInput.value);
    let type = Number(document.querySelector('input[name="type"]:checked').value);

    let price = basePrice[type];

    // Работа с DOM элементами опций
    if (type === 2) {
        price += Number(options.value); // Получение значения из select
    }

    // Работа с DOM элементом checkbox
    if (type === 3 && property.checked) {
        price += Number(property.value);
    }

    // Изменение содержимого DOM элемента
    result.textContent = price * qty;
}

// Функция для изменения видимости элементов в DOM
function updateVisibility() {
    let type = Number(document.querySelector('input[name="type"]:checked').value);

    // Изменение стилей DOM элементов
    optionsBlock.style.display = (type === 2) ? "block" : "none";
    propertyBlock.style.display = (type === 3) ? "block" : "none";

    calculate();
}

// НАВЕШИВАНИЕ СОБЫТИЙ НА DOM ЭЛЕМЕНТЫ
qtyInput.addEventListener("input", function() {
    if (this.value < 1) {
        this.value = 1;
    }
    calculate();
});

options.addEventListener("change", calculate);
property.addEventListener("change", calculate);

// Для каждого radio кнопки добавляем обработчик события
typeRadios.forEach(r => r.addEventListener("change", updateVisibility));

// Инициализация при загрузке DOM
calculate();

// Альтернативный способ - ждём полной загрузки DOM
// document.addEventListener('DOMContentLoaded', function() {
//     calculate();
// });
</script>

</body>
</html>
